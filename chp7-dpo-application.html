

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Chapter 7: A Look Beyond– Evolving World Models &#8212; Relational thinking: from Abstractions to Applications</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'chp7-dpo-application';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Credits" href="acknowledgements.html" />
    <link rel="prev" title="Chapter 6: Evolving Graphs" href="chp6-dpo.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo-white.jpg" class="logo__image only-light" alt="Relational thinking: from Abstractions to Applications - Home"/>
    <script>document.write(`<img src="_static/logo-white.jpg" class="logo__image only-dark" alt="Relational thinking: from Abstractions to Applications - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Introduction
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="chp0.html">Chapter 0: Directed Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="chp1-directed-graphs.html">Chapter 1: Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="chp2-dwd.html">Chapter 2: A Dynamical Systems Detour with Kiki and Bouba</a></li>
<li class="toctree-l1"><a class="reference internal" href="chp3-schemas.html">Chapter 3: Blueprints</a></li>
<li class="toctree-l1"><a class="reference internal" href="chp4-graph-relationships.html">Chapter 4: Categories</a></li>
<li class="toctree-l1"><a class="reference internal" href="chp5-graph-gluing.html">Chapter 5: Combining Graphs</a></li>
<li class="toctree-l1"><a class="reference internal" href="chp6-dpo.html">Chapter 6: Evolving Graphs</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Chapter 7: A Look Beyond– Evolving World Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledgements.html">Credits</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/ToposInstitute/AlgJulia-Book/main?urlpath=tree/./chp7-dpo-application.md" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/ToposInstitute/AlgJulia-Book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/ToposInstitute/AlgJulia-Book/issues/new?title=Issue%20on%20page%20%2Fchp7-dpo-application.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/chp7-dpo-application.ipynb" target="_blank"
   class="btn btn-sm btn-download-notebook-button dropdown-item"
   title="Download notebook file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li><a href="_sources/chp7-dpo-application.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Chapter 7: A Look Beyond– Evolving World Models</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">7.1 Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cube-configuration">7.2 Cube Configuration</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-closed-box">A closed box</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#opening-a-closed-box">Opening a closed box</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#working-in-a-kitchen">7.3 Working in a Kitchen</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#put-cheese-on-bread">Put Cheese On Bread</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plate-slice">Plate Slice</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">7.4 Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="chapter-7-a-look-beyond-evolving-world-models">
<h1>Chapter 7: A Look Beyond– Evolving World Models<a class="headerlink" href="#chapter-7-a-look-beyond-evolving-world-models" title="Permalink to this heading">#</a></h1>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>This chapter will extend the previously learned concepts from graphs to the world.</p>
</div>
<section id="introduction">
<h2>7.1 Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">#</a></h2>
<p>So far, we have uncovered many powerful concepts for modeling graphs and changes to them. Using <strong>schemas</strong>, we can cleverly package up data of a graph in a way that refers to its fundamental concepts, nodes and edges, and how they relate to one another. Using <strong>double-pushout (DPO) rewriting</strong>, we can make a whole host of edits to the data of the graph that can be used to model a number of graph-based scenarios, such as the Greek mythological romance, chemical reactions, and game design.</p>
<p>Schemas provide us with the language to talk about the concepts we wish to shed light on. The graph schema highlights edges and how they relate to nodes. As remarkabley applicable these models are, they beg the question, how do they work with something more complex? For example, what if we were interested in talking about parts of a car or items in your household? What parts go inside the other? What is wet and what is dry? And what items shouldn’t be combined at all costs? We would have to do quite a bit of mental book-keeping to talk in the language of graphs–</p>
<blockquote>
<div><p>“Remember, this node is about a bottle of Coca-Cola soda and this node is about my refridgerator… and the edge between them means that the Coca-Cola soda <em>is in</em> the refridgerator,… but this other edge between the soda and a node representing a box of Mentos means that the Mentos should <em>never be put in</em> the soda…”</p>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you put Mentos in a soda, it will explode.</p>
</div>
<p>Lucky for us, what we have learned so far can have more general applications than graphs. The rest of this chapter will show some examples of this.</p>
</section>
<section id="cube-configuration">
<h2>7.2 Cube Configuration<a class="headerlink" href="#cube-configuration" title="Permalink to this heading">#</a></h2>
<p>Let’s start by simply extending the graph schema with another concept, like faces. Let us we want to model a cube. A face in a cube has four edges. The schema for a cube would then consist of three parts: <code class="docutils literal notranslate"><span class="pre">Face</span></code>, <code class="docutils literal notranslate"><span class="pre">Edge</span></code>, <code class="docutils literal notranslate"><span class="pre">Vertex</span></code>. This schema also models the relationships between faces and edges, and edges and vertices– <code class="docutils literal notranslate"><span class="pre">top</span></code>, <code class="docutils literal notranslate"><span class="pre">bottom</span></code>, <code class="docutils literal notranslate"><span class="pre">left</span></code>, <code class="docutils literal notranslate"><span class="pre">right</span></code>, <code class="docutils literal notranslate"><span class="pre">src</span></code>, <code class="docutils literal notranslate"><span class="pre">tgt</span></code>. DPO rewriting in this context can model various transformations of a cube as if it were a packaging box.</p>
<p>In AlgebraicJulia, this schema can be expressed as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="nd">@present</span><span class="w"> </span><span class="n">SchCube</span><span class="p">(</span><span class="n">FreeSchema</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">  </span><span class="n">Face</span><span class="o">::</span><span class="kt">Ob</span>
<span class="w">  </span><span class="n">Edge</span><span class="o">::</span><span class="kt">Ob</span>
<span class="w">  </span><span class="n">Vertex</span><span class="o">::</span><span class="kt">Ob</span>

<span class="w">  </span><span class="n">top</span><span class="o">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">Face</span><span class="p">,</span><span class="w"> </span><span class="n">Edge</span><span class="p">)</span>
<span class="w">  </span><span class="n">right</span><span class="o">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">Face</span><span class="p">,</span><span class="w"> </span><span class="n">Edge</span><span class="p">)</span>
<span class="w">  </span><span class="n">bottom</span><span class="o">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">Face</span><span class="p">,</span><span class="w"> </span><span class="n">Edge</span><span class="p">)</span>
<span class="w">  </span><span class="n">left</span><span class="o">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">Face</span><span class="p">,</span><span class="w"> </span><span class="n">Edge</span><span class="p">)</span>

<span class="w">  </span><span class="n">src</span><span class="o">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">Edge</span><span class="p">,</span><span class="w"> </span><span class="n">Vertex</span><span class="p">)</span>
<span class="w">  </span><span class="n">tgt</span><span class="o">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">Edge</span><span class="p">,</span><span class="w"> </span><span class="n">Vertex</span><span class="p">)</span>
<span class="k">end</span>
<span class="n">to_graphviz</span><span class="p">(</span><span class="n">Sch3DShape</span><span class="p">)</span>
<span class="nd">@acset_type</span><span class="w"> </span><span class="n">Typ3DShape</span><span class="p">(</span><span class="n">Sch3DShape</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<a class="reference internal image-reference" href="_images/Sch3DShape.svg"><img alt="_images/Sch3DShape.svg" class="align-center" src="_images/Sch3DShape.svg" width="350px" /></a>
<p>We can see that the schema, <code class="docutils literal notranslate"><span class="pre">SchCube</span></code>, closely resembles the schema for a graph, <code class="docutils literal notranslate"><span class="pre">SchGraph</span></code>. More pointedly, <code class="docutils literal notranslate"><span class="pre">SchCube</span></code> extends <code class="docutils literal notranslate"><span class="pre">SchGraph</span></code> with the idea of a <code class="docutils literal notranslate"><span class="pre">Face</span></code> its edges.</p>
<div class="admonition-extending-schemas admonition">
<p class="admonition-title">Extending schemas</p>
<p>In AlgebraicJulia, inheritence of schemas can be programmed using <code class="docutils literal notranslate"><span class="pre">&lt;:</span></code>. In the case of <code class="docutils literal notranslate"><span class="pre">SchCube</span></code> and <code class="docutils literal notranslate"><span class="pre">SchGraph</span></code>, this can be written as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@present</span> <span class="n">Sch3DShape</span><span class="p">(</span><span class="n">FreeSchema</span><span class="p">)</span> <span class="o">&lt;</span><span class="p">:</span> <span class="n">SchGraph</span> <span class="n">begin</span>
  <span class="n">Face</span><span class="p">::</span><span class="n">Ob</span>

  <span class="n">top</span><span class="p">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">Face</span><span class="p">,</span> <span class="n">Edge</span><span class="p">)</span>
  <span class="n">right</span><span class="p">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">Face</span><span class="p">,</span> <span class="n">Edge</span><span class="p">)</span>
  <span class="n">bottom</span><span class="p">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">Face</span><span class="p">,</span> <span class="n">Edge</span><span class="p">)</span>
  <span class="n">left</span><span class="p">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">Face</span><span class="p">,</span> <span class="n">Edge</span><span class="p">)</span>
<span class="n">end</span>
</pre></div>
</div>
</div>
<p>We can model various configurations of a cube, akin to unfolding a cardboard box. For instance, using DPO rewriting, we could model the action of opening or closing the top of the box. This operation would involve redefining the relationships between the Faces and Edges objects to “remove” the connections that form the top face. Similarly, unfolding the cube into a flat layout would radically alter the connections between Faces, Edges, and Vertices to represent the cube in an unfolded state. Such transformations are powerful for visualizing and reasoning about the structural possibilities of boxes in three-dimensional space.</p>
<div class="docutils">
<a class="reference internal image-reference" href="_images/TopOpening.gif"><img alt="_images/TopOpening.gif" class="align-center" src="_images/TopOpening.gif" style="width: 350px;" /></a>
</br>
</div>
<p>Let us say we want to have a cube represent a box with a birthday cake in it. When we deliver the cake to a friend, it starts off as closed. We can say that it’s closed by explaining how the faces, edges, and vertices are defined relative to one another. In a cube, there are exactly six faces, which we can call <code class="docutils literal notranslate"><span class="pre">f1,</span> <span class="pre">f2,</span> <span class="pre">f3,</span> <span class="pre">f4,</span> <span class="pre">f5,</span> <span class="pre">f6</span></code>. Faces have exactly four edges, which we call the top, bottom, left, and right edges. Edges can also have names, such as <code class="docutils literal notranslate"><span class="pre">e1,</span> <span class="pre">e2,</span> <span class="pre">e3,</span> <span class="pre">e4,</span> <span class="pre">...</span></code>. If we want to say the top of edge of <code class="docutils literal notranslate"><span class="pre">f1</span></code> is <code class="docutils literal notranslate"><span class="pre">e1</span></code>, then we can refer to the schema and express the the following piece of data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">top</span><span class="p">(</span><span class="n">f1</span><span class="p">)</span> <span class="o">==</span> <span class="n">e1</span>
</pre></div>
</div>
<p>Similarly, we can say the left edge of <code class="docutils literal notranslate"><span class="pre">f1</span></code> is <code class="docutils literal notranslate"><span class="pre">e2</span></code> by saying:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bottom</span><span class="p">(</span><span class="n">f1</span><span class="p">)</span> <span class="o">==</span> <span class="n">e2</span>
</pre></div>
</div>
<p>Edges, on the other hand, have exactly two vertices, the source and target. This is reminiscent of how we came to understand edges in a graph. The schema for both the Cube and the Graph have two morphisms, <code class="docutils literal notranslate"><span class="pre">src</span></code> and <code class="docutils literal notranslate"><span class="pre">tgt</span></code>, that map <code class="docutils literal notranslate"><span class="pre">Edge</span></code> to <code class="docutils literal notranslate"><span class="pre">Vertex</span></code>. So, if we would like to state what vertices bound the edge, <code class="docutils literal notranslate"><span class="pre">e1</span></code>, we can say</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">src</span><span class="p">(</span><span class="n">e1</span><span class="p">)</span> <span class="o">==</span> <span class="n">v1</span>
<span class="n">tgt</span><span class="p">(</span><span class="n">e1</span><span class="p">)</span> <span class="o">==</span> <span class="n">v2</span>
</pre></div>
</div>
<section id="a-closed-box">
<h3>A closed box<a class="headerlink" href="#a-closed-box" title="Permalink to this heading">#</a></h3>
<p>We can create an instance of a cube, by associating data with the schema <code class="docutils literal notranslate"><span class="pre">SchCube</span></code>.</p>
<figure class="align-center" id="id11">
<a class="reference internal image-reference" href="_images/PartsLayout.png"><img alt="_images/PartsLayout.png" src="_images/PartsLayout.png" style="width: 550px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 1 </span><span class="caption-text">A layout of the faces, edges, and vertices for our box.</span><a class="headerlink" href="#id11" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id12">
<a class="reference internal image-reference" href="_images/BoxAssembly.gif"><img alt="_images/BoxAssembly.gif" src="_images/BoxAssembly.gif" style="width: 400px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 2 </span><span class="caption-text">The faces, edges, and vertices labeled for our box.</span><a class="headerlink" href="#id12" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">closedCube</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nd">@acset_colim</span><span class="w"> </span><span class="n">ySchCube</span><span class="w"> </span><span class="k">begin</span>
<span class="w">  </span><span class="p">(</span><span class="n">f1</span><span class="p">,</span><span class="w"> </span><span class="n">f2</span><span class="p">,</span><span class="w"> </span><span class="n">f3</span><span class="p">,</span><span class="w"> </span><span class="n">f4</span><span class="p">,</span><span class="w"> </span><span class="n">f5</span><span class="p">,</span><span class="w"> </span><span class="n">f6</span><span class="p">)</span><span class="o">::</span><span class="kt">Face</span>

<span class="w">  </span><span class="c"># top face (clockwise)</span>
<span class="w">  </span><span class="n">top</span><span class="p">(</span><span class="n">f1</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">top</span><span class="p">(</span><span class="n">f5</span><span class="p">)</span><span class="w">        </span><span class="c"># e1</span>
<span class="w">  </span><span class="n">right</span><span class="p">(</span><span class="n">f1</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">top</span><span class="p">(</span><span class="n">f2</span><span class="p">)</span><span class="w">      </span><span class="c"># e2</span>
<span class="w">  </span><span class="n">bottom</span><span class="p">(</span><span class="n">f1</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">top</span><span class="p">(</span><span class="n">f3</span><span class="p">)</span><span class="w">     </span><span class="c"># e3</span>
<span class="w">  </span><span class="n">left</span><span class="p">(</span><span class="n">f1</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">top</span><span class="p">(</span><span class="n">f4</span><span class="p">)</span><span class="w">       </span><span class="c"># e4</span>

<span class="w">  </span><span class="c"># wall faces (clockwise)</span>
<span class="w">  </span><span class="n">left</span><span class="p">(</span><span class="n">f2</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">right</span><span class="p">(</span><span class="n">f3</span><span class="p">)</span><span class="w">     </span><span class="c"># e5</span>
<span class="w">  </span><span class="n">left</span><span class="p">(</span><span class="n">f3</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">right</span><span class="p">(</span><span class="n">f4</span><span class="p">)</span><span class="w">     </span><span class="c"># e6</span>
<span class="w">  </span><span class="n">left</span><span class="p">(</span><span class="n">f4</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">right</span><span class="p">(</span><span class="n">f5</span><span class="p">)</span><span class="w">     </span><span class="c"># e7</span>
<span class="w">  </span><span class="n">left</span><span class="p">(</span><span class="n">f5</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">right</span><span class="p">(</span><span class="n">f2</span><span class="p">)</span><span class="w">     </span><span class="c"># e8</span>

<span class="w">  </span><span class="c"># bottom face (clockwise)</span>
<span class="w">  </span><span class="n">top</span><span class="p">(</span><span class="n">f6</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">bottom</span><span class="p">(</span><span class="n">f5</span><span class="p">)</span><span class="w">     </span><span class="c"># e9</span>
<span class="w">  </span><span class="n">right</span><span class="p">(</span><span class="n">f6</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">bottom</span><span class="p">(</span><span class="n">f2</span><span class="p">)</span><span class="w">   </span><span class="c"># e10</span>
<span class="w">  </span><span class="n">bottom</span><span class="p">(</span><span class="n">f6</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">bottom</span><span class="p">(</span><span class="n">f3</span><span class="p">)</span><span class="w">  </span><span class="c"># e11</span>
<span class="w">  </span><span class="n">left</span><span class="p">(</span><span class="n">f6</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">bottom</span><span class="p">(</span><span class="n">f4</span><span class="p">)</span><span class="w">    </span><span class="c"># e12</span>

<span class="w">  </span><span class="c"># top vertices</span>
<span class="w">  </span><span class="n">tgt</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">f1</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">f1</span><span class="p">))</span><span class="w">     </span><span class="c"># v1</span>
<span class="w">  </span><span class="n">tgt</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">f1</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">f2</span><span class="p">))</span>
<span class="w">  </span><span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">f1</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">src</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">f1</span><span class="p">))</span><span class="w">  </span><span class="c"># v2 </span>
<span class="w">  </span><span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">f1</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">f3</span><span class="p">))</span>
<span class="w">  </span><span class="n">tgt</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">f1</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">src</span><span class="p">(</span><span class="n">left</span><span class="p">(</span><span class="n">f1</span><span class="p">))</span><span class="w">   </span><span class="c"># v3 </span>
<span class="w">  </span><span class="n">tgt</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">f1</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">f4</span><span class="p">))</span>
<span class="w">  </span><span class="n">tgt</span><span class="p">(</span><span class="n">left</span><span class="p">(</span><span class="n">f1</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">src</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">f1</span><span class="p">))</span><span class="w">      </span><span class="c"># v4</span>
<span class="w">  </span><span class="n">tgt</span><span class="p">(</span><span class="n">left</span><span class="p">(</span><span class="n">f1</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">f5</span><span class="p">))</span>

<span class="w">  </span><span class="c"># bottom vertices</span>
<span class="w">  </span><span class="n">tgt</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">f6</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">f6</span><span class="p">))</span><span class="w">     </span><span class="c"># v5</span>
<span class="w">  </span><span class="n">tgt</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">f6</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">f2</span><span class="p">))</span>
<span class="w">  </span><span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">f6</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">src</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">f6</span><span class="p">))</span><span class="w">  </span><span class="c"># v6</span>
<span class="w">  </span><span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">f6</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">f3</span><span class="p">))</span>
<span class="w">  </span><span class="n">tgt</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">f6</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">src</span><span class="p">(</span><span class="n">left</span><span class="p">(</span><span class="n">f6</span><span class="p">))</span><span class="w">   </span><span class="c"># v7 </span>
<span class="w">  </span><span class="n">tgt</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">f6</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">f4</span><span class="p">))</span>
<span class="w">  </span><span class="n">tgt</span><span class="p">(</span><span class="n">left</span><span class="p">(</span><span class="n">f6</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">src</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">f6</span><span class="p">))</span><span class="w">      </span><span class="c"># v8</span>
<span class="w">  </span><span class="n">tgt</span><span class="p">(</span><span class="n">left</span><span class="p">(</span><span class="n">f6</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">f5</span><span class="p">))</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<p>This instance defines a box that looks like <em>Fig. 1</em>.</p>
</section>
<section id="opening-a-closed-box">
<h3>Opening a closed box<a class="headerlink" href="#opening-a-closed-box" title="Permalink to this heading">#</a></h3>
<p>Now, once we deliver the birthday cake, we want be able to open the box so the birthday celebrant can enjoy their sweet treat. We can model this by designing a DPO rule that opens a face of the box.</p>
<figure class="align-center" id="id13">
<img alt="_images/BoxDPO0.png" src="_images/BoxDPO0.png" />
<figcaption>
<p><span class="caption-number">Fig. 3 </span><span class="caption-text">The DPO rewrite rules for opening a closed box.</span><a class="headerlink" href="#id13" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<div class="dropdown admonition">
<p class="admonition-title">Opening a box rule</p>
<p>The open box rule has the following <code class="docutils literal notranslate"><span class="pre">L</span></code>, <code class="docutils literal notranslate"><span class="pre">K</span></code>, and <code class="docutils literal notranslate"><span class="pre">R</span></code> parts:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">open_box</span> <span class="o">=</span> <span class="nd">@migration</span><span class="p">(</span><span class="n">SchRule</span><span class="p">,</span> <span class="n">Sch3DShape</span><span class="p">,</span> <span class="n">begin</span>
  <span class="n">L</span> <span class="o">=&gt;</span> <span class="nd">@join</span> <span class="n">begin</span>
    <span class="p">(</span><span class="n">face</span><span class="p">,</span> <span class="n">face1</span><span class="p">,</span> <span class="n">face2</span><span class="p">,</span> <span class="n">face3</span><span class="p">,</span> <span class="n">face4</span><span class="p">)::</span><span class="n">Face</span>

    <span class="c1"># top edges</span>
    <span class="n">top</span><span class="p">(</span><span class="n">face</span><span class="p">)</span> <span class="o">==</span> <span class="n">top</span><span class="p">(</span><span class="n">face1</span><span class="p">)</span>
    <span class="n">right</span><span class="p">(</span><span class="n">face</span><span class="p">)</span> <span class="o">==</span> <span class="n">top</span><span class="p">(</span><span class="n">face2</span><span class="p">)</span>
    <span class="n">bottom</span><span class="p">(</span><span class="n">face</span><span class="p">)</span> <span class="o">==</span> <span class="n">top</span><span class="p">(</span><span class="n">face3</span><span class="p">)</span>
    <span class="n">left</span><span class="p">(</span><span class="n">face</span><span class="p">)</span> <span class="o">==</span> <span class="n">top</span><span class="p">(</span><span class="n">face4</span><span class="p">)</span>

    <span class="c1"># wall faces (clockwise)</span>
    <span class="n">left</span><span class="p">(</span><span class="n">face1</span><span class="p">)</span> <span class="o">==</span> <span class="n">right</span><span class="p">(</span><span class="n">face2</span><span class="p">)</span>
    <span class="n">left</span><span class="p">(</span><span class="n">face2</span><span class="p">)</span> <span class="o">==</span> <span class="n">right</span><span class="p">(</span><span class="n">face3</span><span class="p">)</span>
    <span class="n">left</span><span class="p">(</span><span class="n">face3</span><span class="p">)</span> <span class="o">==</span> <span class="n">right</span><span class="p">(</span><span class="n">face4</span><span class="p">)</span>
    <span class="n">left</span><span class="p">(</span><span class="n">face4</span><span class="p">)</span> <span class="o">==</span> <span class="n">right</span><span class="p">(</span><span class="n">face1</span><span class="p">)</span>

    <span class="c1"># top vertices</span>
    <span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face1</span><span class="p">))</span> <span class="o">==</span> <span class="n">src</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">face1</span><span class="p">))</span>
    <span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face1</span><span class="p">))</span> <span class="o">==</span> <span class="n">tgt</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">face4</span><span class="p">))</span>
    <span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face2</span><span class="p">))</span> <span class="o">==</span> <span class="n">src</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">face2</span><span class="p">))</span>
    <span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face2</span><span class="p">))</span> <span class="o">==</span> <span class="n">tgt</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">face1</span><span class="p">))</span>
    <span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face3</span><span class="p">))</span> <span class="o">==</span> <span class="n">src</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">face3</span><span class="p">))</span>
    <span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face3</span><span class="p">))</span> <span class="o">==</span> <span class="n">tgt</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">face2</span><span class="p">))</span>
    <span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face4</span><span class="p">))</span> <span class="o">==</span> <span class="n">src</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">face4</span><span class="p">))</span>
    <span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face4</span><span class="p">))</span> <span class="o">==</span> <span class="n">tgt</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">face3</span><span class="p">))</span>

    <span class="c1"># bottom vertices</span>
    <span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face1</span><span class="p">))</span> <span class="o">==</span> <span class="n">src</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">face1</span><span class="p">))</span>
    <span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face1</span><span class="p">))</span> <span class="o">==</span> <span class="n">tgt</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">face4</span><span class="p">))</span>
    <span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face2</span><span class="p">))</span> <span class="o">==</span> <span class="n">src</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">face2</span><span class="p">))</span>
    <span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face2</span><span class="p">))</span> <span class="o">==</span> <span class="n">tgt</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">face1</span><span class="p">))</span>
    <span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face3</span><span class="p">))</span> <span class="o">==</span> <span class="n">src</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">face3</span><span class="p">))</span>
    <span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face3</span><span class="p">))</span> <span class="o">==</span> <span class="n">tgt</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">face2</span><span class="p">))</span>
    <span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face4</span><span class="p">))</span> <span class="o">==</span> <span class="n">src</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">face4</span><span class="p">))</span>
    <span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face4</span><span class="p">))</span> <span class="o">==</span> <span class="n">tgt</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">face3</span><span class="p">))</span>
  <span class="n">end</span>
  <span class="n">K</span> <span class="o">=&gt;</span> <span class="nd">@join</span> <span class="n">begin</span>
    <span class="p">(</span><span class="n">face1</span><span class="p">,</span> <span class="n">face2</span><span class="p">,</span> <span class="n">face3</span><span class="p">,</span> <span class="n">face4</span><span class="p">)::</span><span class="n">Face</span>
  <span class="n">end</span>
  <span class="n">R</span> <span class="o">=&gt;</span> <span class="nd">@join</span> <span class="n">begin</span>
    <span class="p">(</span><span class="n">face1</span><span class="p">,</span> <span class="n">face2</span><span class="p">,</span> <span class="n">face3</span><span class="p">,</span> <span class="n">face4</span><span class="p">,</span> <span class="n">faceNew</span><span class="p">)::</span><span class="n">Face</span>
    <span class="p">(</span><span class="n">edge1</span><span class="p">,</span> <span class="n">edge2</span><span class="p">,</span> <span class="n">edge3</span><span class="p">)::</span><span class="n">Edge</span>

    <span class="c1"># top edges</span>
    <span class="n">top</span><span class="p">(</span><span class="n">faceNew</span><span class="p">)</span> <span class="o">==</span> <span class="n">top</span><span class="p">(</span><span class="n">face4</span><span class="p">)</span>
    <span class="n">right</span><span class="p">(</span><span class="n">faceNew</span><span class="p">)</span> <span class="o">==</span> <span class="n">edge1</span>
    <span class="n">bottom</span><span class="p">(</span><span class="n">faceNew</span><span class="p">)</span> <span class="o">==</span> <span class="n">edge2</span>
    <span class="n">left</span><span class="p">(</span><span class="n">faceNew</span><span class="p">)</span> <span class="o">==</span> <span class="n">edge3</span>

    <span class="c1"># connect vertices of new edges</span>
    <span class="n">src</span><span class="p">(</span><span class="n">edge1</span><span class="p">)</span> <span class="o">==</span> <span class="n">tgt</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">face4</span><span class="p">))</span>
    <span class="n">tgt</span><span class="p">(</span><span class="n">edge1</span><span class="p">)</span> <span class="o">==</span> <span class="n">src</span><span class="p">(</span><span class="n">edge2</span><span class="p">)</span>
    <span class="n">tgt</span><span class="p">(</span><span class="n">edge2</span><span class="p">)</span> <span class="o">==</span> <span class="n">src</span><span class="p">(</span><span class="n">edge3</span><span class="p">)</span>
    <span class="n">tgt</span><span class="p">(</span><span class="n">edge3</span><span class="p">)</span> <span class="o">==</span> <span class="n">src</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">face4</span><span class="p">))</span>

    <span class="c1"># wall faces (clockwise</span>
    <span class="n">left</span><span class="p">(</span><span class="n">face1</span><span class="p">)</span> <span class="o">==</span> <span class="n">right</span><span class="p">(</span><span class="n">face2</span><span class="p">)</span>     <span class="c1"># e5</span>
    <span class="n">left</span><span class="p">(</span><span class="n">face2</span><span class="p">)</span> <span class="o">==</span> <span class="n">right</span><span class="p">(</span><span class="n">face3</span><span class="p">)</span>     <span class="c1"># e6</span>
    <span class="n">left</span><span class="p">(</span><span class="n">face3</span><span class="p">)</span> <span class="o">==</span> <span class="n">right</span><span class="p">(</span><span class="n">face4</span><span class="p">)</span>     <span class="c1"># e7</span>
    <span class="n">left</span><span class="p">(</span><span class="n">face4</span><span class="p">)</span> <span class="o">==</span> <span class="n">right</span><span class="p">(</span><span class="n">face1</span><span class="p">)</span>     <span class="c1"># e8</span>

    <span class="c1"># top vertices</span>
    <span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face1</span><span class="p">))</span> <span class="o">==</span> <span class="n">src</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">face1</span><span class="p">))</span>
    <span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face1</span><span class="p">))</span> <span class="o">==</span> <span class="n">tgt</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">face4</span><span class="p">))</span>
    <span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face2</span><span class="p">))</span> <span class="o">==</span> <span class="n">src</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">face2</span><span class="p">))</span>
    <span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face2</span><span class="p">))</span> <span class="o">==</span> <span class="n">tgt</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">face1</span><span class="p">))</span>
    <span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face3</span><span class="p">))</span> <span class="o">==</span> <span class="n">src</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">face3</span><span class="p">))</span>
    <span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face3</span><span class="p">))</span> <span class="o">==</span> <span class="n">tgt</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">face2</span><span class="p">))</span>
    <span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face4</span><span class="p">))</span> <span class="o">==</span> <span class="n">src</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">face4</span><span class="p">))</span>
    <span class="n">src</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face4</span><span class="p">))</span> <span class="o">==</span> <span class="n">tgt</span><span class="p">(</span><span class="n">top</span><span class="p">(</span><span class="n">face3</span><span class="p">))</span>

    <span class="c1"># bottom vertices</span>
    <span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face1</span><span class="p">))</span> <span class="o">==</span> <span class="n">src</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">face1</span><span class="p">))</span>
    <span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face1</span><span class="p">))</span> <span class="o">==</span> <span class="n">tgt</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">face4</span><span class="p">))</span>
    <span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face2</span><span class="p">))</span> <span class="o">==</span> <span class="n">src</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">face2</span><span class="p">))</span>
    <span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face2</span><span class="p">))</span> <span class="o">==</span> <span class="n">tgt</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">face1</span><span class="p">))</span>
    <span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face3</span><span class="p">))</span> <span class="o">==</span> <span class="n">src</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">face3</span><span class="p">))</span>
    <span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face3</span><span class="p">))</span> <span class="o">==</span> <span class="n">tgt</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">face2</span><span class="p">))</span>
    <span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face4</span><span class="p">))</span> <span class="o">==</span> <span class="n">src</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">face4</span><span class="p">))</span>
    <span class="n">tgt</span><span class="p">(</span><span class="n">right</span><span class="p">(</span><span class="n">face4</span><span class="p">))</span> <span class="o">==</span> <span class="n">tgt</span><span class="p">(</span><span class="n">bottom</span><span class="p">(</span><span class="n">face3</span><span class="p">))</span>
  <span class="n">end</span>
  <span class="n">l</span> <span class="o">=&gt;</span> <span class="n">begin</span>
    <span class="n">face1</span> <span class="o">=&gt;</span> <span class="n">face1</span>
    <span class="n">face2</span> <span class="o">=&gt;</span> <span class="n">face2</span>
    <span class="n">face3</span> <span class="o">=&gt;</span> <span class="n">face3</span>
    <span class="n">face4</span> <span class="o">=&gt;</span> <span class="n">face4</span>
  <span class="n">end</span>
  <span class="n">r</span> <span class="o">=&gt;</span> <span class="n">begin</span>
    <span class="n">face1</span> <span class="o">=&gt;</span> <span class="n">face1</span>
    <span class="n">face2</span> <span class="o">=&gt;</span> <span class="n">face2</span>
    <span class="n">face3</span> <span class="o">=&gt;</span> <span class="n">face3</span>
    <span class="n">face4</span> <span class="o">=&gt;</span> <span class="n">face4</span>
  <span class="n">end</span>
<span class="n">end</span><span class="p">)</span>
<span class="n">open_box_rule</span> <span class="o">=</span> <span class="n">make_rule</span><span class="p">(</span><span class="n">openBox</span><span class="p">,</span> <span class="n">ySchCube</span><span class="p">)</span>
</pre></div>
</div>
<p>Note: <code class="docutils literal notranslate"><span class="pre">&#64;migration</span></code> is formatting the parts of the rule so that <code class="docutils literal notranslate"><span class="pre">L</span></code>, <code class="docutils literal notranslate"><span class="pre">K</span></code>, <code class="docutils literal notranslate"><span class="pre">R</span></code>, <code class="docutils literal notranslate"><span class="pre">l</span></code>, and <code class="docutils literal notranslate"><span class="pre">r</span></code> are clearly identified.</p>
</div>
<aside class="sidebar">
<p class="sidebar-title">The box never opens from underneath!</p>
<a class="reference internal image-reference" href="_images/BottomOpening.gif"><img alt="Whoopsy!" class="align-left" src="_images/BottomOpening.gif" style="width: 400px;" /></a>
</aside>
<p>The rule looks for the top face of the cube, deletes it, and adds another face that is connected by only one edge to the rest of the cube.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">L</span></code> part of the rule represents the condition that must be satisfied in order for the rule to be applied. In this case, we want to be able to open a face that is currently shut. A face is considered shut if it is connected to four other faces by four common edges. We can model this by defining a cube that has all but the bottom face. The bottom face is excluded because it is not relevant to the rule.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">K</span></code> part tells us that all the wall faces are the same between <code class="docutils literal notranslate"><span class="pre">L</span></code> and <code class="docutils literal notranslate"><span class="pre">R</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">R</span></code> part of the rule represents the state in which the open face is connected to only one other face by a common edge that acts as the hinge to the open box. New edges and vertices are added to represent the disconnected edges.</p>
<p>This rule is also well-specified because it will only match on the top face of the box because it considers the orientation of the edges. That means the box will never open from underneath!</p>
<!-- ![](assets/Ch7/BottomOpening.gif)

<!-- We can constrain this by defining a specific match for our DPO rule. In AlgebraicJulia, this can be expressed by saying the specific face we would like to match. -->
<!-- ##### TODO: Need to figure out how to get the rule to match such that face = face1
```
match = homomorphisms(L, closedCube)[1]
``` -->
<p>In summary, DPO rewriting can help us model various configurations of a box by manipulating the data associated with the <code class="docutils literal notranslate"><span class="pre">SchCube</span></code> schema.</p>
</section>
</section>
<section id="working-in-a-kitchen">
<h2>7.3 Working in a Kitchen<a class="headerlink" href="#working-in-a-kitchen" title="Permalink to this heading">#</a></h2>
<p>This machinery can be used to not only represent geometric objects, but it can also the relationship of items in a kitchen.</p>
<div class="docutils">
<a class="reference internal image-reference" href="_images/KitchenBefore.png"><img alt="_images/KitchenBefore.png" class="align-center" src="_images/KitchenBefore.png" style="width: 500px;" /></a>
</br>
</div>
<p>Concider a schema for a kitchen world. This schema contains ideas about {Food, Egg, Bread, Cheese, BreadSlice, Counter, Kitchenware, Entity} and their subtyping relationships (e.g., Egg, Bread, Cheese, BreadSlice are Food) and spatial relationships (e.g., Counter is on an Entity, Kitchenware is on an Entity, and Food is on an Entity).</p>
<p>If you recall from <span class="xref myst">Chapter 3</span>, objects and morphisms in a schema are eventually mapped to sets and functions, respectively. This means that a relationship from <code class="docutils literal notranslate"><span class="pre">Bread</span></code> to <code class="docutils literal notranslate"><span class="pre">Food</span></code> says that all elements of <code class="docutils literal notranslate"><span class="pre">Bread</span></code> are a <code class="docutils literal notranslate"><span class="pre">Food</span></code>, and likewise, a morphism <code class="docutils literal notranslate"><span class="pre">Food</span></code> is on an <code class="docutils literal notranslate"><span class="pre">Entity</span></code> says that all elements of <code class="docutils literal notranslate"><span class="pre">Food</span></code> are on an <code class="docutils literal notranslate"><span class="pre">Entity</span></code>. This schema enforces a universal expectation about the types of objects and their arrangements while keeping track of what type of thing or relationship it is.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="nd">@present</span><span class="w"> </span><span class="n">SchKitchen</span><span class="p">(</span><span class="n">FreeSchema</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">  </span><span class="n">Entity</span><span class="o">::</span><span class="kt">Ob</span>

<span class="w">  </span><span class="n">Food</span><span class="o">::</span><span class="kt">Ob</span>
<span class="w">  </span><span class="n">food_in_on</span><span class="o">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">Food</span><span class="p">,</span><span class="w"> </span><span class="n">Entity</span><span class="p">)</span>
<span class="w">  </span><span class="n">food_is_entity</span><span class="o">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">Food</span><span class="p">,</span><span class="w"> </span><span class="n">Entity</span><span class="p">)</span>

<span class="w">  </span><span class="n">Kitchenware</span><span class="o">::</span><span class="kt">Ob</span>
<span class="w">  </span><span class="n">ware_in_on</span><span class="o">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">Kitchenware</span><span class="p">,</span><span class="w"> </span><span class="n">Entity</span><span class="p">)</span>
<span class="w">  </span><span class="n">ware_is_entity</span><span class="o">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">Kitchenware</span><span class="p">,</span><span class="w"> </span><span class="n">Entity</span><span class="p">)</span>

<span class="w">  </span><span class="n">Counter</span><span class="o">::</span><span class="kt">Ob</span>
<span class="w">  </span><span class="n">counter_is_entity</span><span class="o">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">Counter</span><span class="p">,</span><span class="w"> </span><span class="n">Entity</span><span class="p">)</span>

<span class="w">  </span><span class="n">BreadLoaf</span><span class="o">::</span><span class="kt">Ob</span>
<span class="w">  </span><span class="n">bread_loaf_is_food</span><span class="o">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">BreadLoaf</span><span class="p">,</span><span class="w"> </span><span class="n">Food</span><span class="p">)</span>
<span class="w">  </span><span class="n">BreadSlice</span><span class="o">::</span><span class="kt">Ob</span>
<span class="w">  </span><span class="n">bread_slice_is_food</span><span class="o">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">BreadSlice</span><span class="p">,</span><span class="w"> </span><span class="n">Food</span><span class="p">)</span>
<span class="w">  </span><span class="n">Egg</span><span class="o">::</span><span class="kt">Ob</span>
<span class="w">  </span><span class="n">egg_is_food</span><span class="o">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">Egg</span><span class="p">,</span><span class="w"> </span><span class="n">Food</span><span class="p">)</span>
<span class="w">  </span><span class="n">Cheese</span><span class="o">::</span><span class="kt">Ob</span>
<span class="w">  </span><span class="n">cheese_is_food</span><span class="o">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">Cheese</span><span class="p">,</span><span class="w"> </span><span class="n">Food</span><span class="p">)</span>

<span class="w">  </span><span class="n">Knife</span><span class="o">::</span><span class="kt">Ob</span>
<span class="w">  </span><span class="n">knife_is_ware</span><span class="o">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">Knife</span><span class="p">,</span><span class="w"> </span><span class="n">Kitchenware</span><span class="p">)</span>
<span class="w">  </span><span class="n">Plate</span><span class="o">::</span><span class="kt">Ob</span>
<span class="w">  </span><span class="n">plate_is_ware</span><span class="o">::</span><span class="n">Hom</span><span class="p">(</span><span class="n">Plate</span><span class="p">,</span><span class="w"> </span><span class="n">Kitchenware</span><span class="p">)</span>
<span class="k">end</span>
<span class="n">to_graphviz</span><span class="p">(</span><span class="n">SchKitchen</span><span class="p">)</span>

<span class="nd">@acset_type</span><span class="w"> </span><span class="n">Kitchen</span><span class="p">(</span><span class="n">SchKitchen</span><span class="p">)</span>

<span class="n">yKitchen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yoneda</span><span class="p">(</span><span class="n">Kitchen</span><span class="p">,</span><span class="w"> </span><span class="n">SchKitchen</span><span class="p">;</span><span class="w"> </span><span class="n">cache</span><span class="o">=</span><span class="n">make_cache</span><span class="p">(</span><span class="n">Kitchen</span><span class="p">,</span><span class="w"> </span><span class="n">SchKitchen</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Kitchen&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<img alt="_images/SchKitchen.svg" class="align-center" src="_images/SchKitchen.svg" /><p>DPO rewriting here can model transformations in the kitchen’s state, such as changing the arrangement of items. For example, applying a DPO rewrite rule could simulate the action of combining cheese on a bread slice, altering their relationships to reflect this new arrangement.</p>
<section id="put-cheese-on-bread">
<h3>Put Cheese On Bread<a class="headerlink" href="#put-cheese-on-bread" title="Permalink to this heading">#</a></h3>
<p>Let us take as an example the action of putting cheese on bread. Following the same approach as the previous example, we can define <code class="docutils literal notranslate"><span class="pre">L</span></code>, <code class="docutils literal notranslate"><span class="pre">R</span></code>, and <code class="docutils literal notranslate"><span class="pre">K</span></code> components of this rewrite rule.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">put_cheese_on_bread</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nd">@migration</span><span class="p">(</span><span class="n">SchKitchen</span><span class="p">,</span><span class="w"> </span><span class="k">begin</span>
<span class="w">  </span><span class="n">L</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nd">@join</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="n">cheese</span><span class="o">::</span><span class="kt">Cheese</span>
<span class="w">    </span><span class="n">slice</span><span class="o">::</span><span class="kt">BreadSlice</span>
<span class="w">  </span><span class="k">end</span>
<span class="w">  </span><span class="n">K</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nd">@join</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="n">cheese</span><span class="o">::</span><span class="kt">Cheese</span>
<span class="w">    </span><span class="n">slice</span><span class="o">::</span><span class="kt">BreadSlice</span>
<span class="w">  </span><span class="k">end</span>
<span class="w">  </span><span class="n">R</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nd">@join</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="n">cheese</span><span class="o">::</span><span class="kt">Cheese</span>
<span class="w">    </span><span class="n">slice</span><span class="o">::</span><span class="kt">BreadSlice</span>
<span class="w">    </span><span class="n">cheese_is_food</span><span class="p">(</span><span class="n">cheese</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">bread_slice_is_food</span><span class="p">(</span><span class="n">slice</span><span class="p">)</span><span class="w">  </span><span class="c"># become one</span>
<span class="w">  </span><span class="k">end</span>
<span class="k">end</span><span class="p">)</span>
<span class="n">put_cheese_on_bread_rule</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">make_rule</span><span class="p">(</span><span class="n">put_cheese_on_bread</span><span class="p">,</span><span class="w"> </span><span class="n">yKitchen</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Relative to our other examples, this schema has substantially more object and morphisms which would require a burdensome amount of syntax to define an <code class="docutils literal notranslate"><span class="pre">ACSetTransformation</span></code> for <code class="docutils literal notranslate"><span class="pre">l</span></code> and <code class="docutils literal notranslate"><span class="pre">r</span></code>. Instead, we can compute the colimit of representables <a class="footnote-reference brackets" href="#id6" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> and infer the homomorphism maps, <code class="docutils literal notranslate"><span class="pre">l</span></code> and <code class="docutils literal notranslate"><span class="pre">r</span></code>. This functionality is subsumed in <code class="docutils literal notranslate"><span class="pre">make_rule()</span></code>.</p>
</div>
<figure class="align-center" id="id14">
<img alt="_images/KitchenDPO.png" src="_images/KitchenDPO.png" />
<figcaption>
<p><span class="caption-number">Fig. 4 </span><span class="caption-text">The DPO rewrite rules for putting cheese on bread.</span><a class="headerlink" href="#id14" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>As we can see from this rule, we can model the concept of the bread slice and cheese becoming one by sending <code class="docutils literal notranslate"><span class="pre">cheese</span></code> to the same food element as <code class="docutils literal notranslate"><span class="pre">bread_slice</span></code>. This is a knowledge engineering choice that demonstrates the flexibility of DPO-rewriting rules.</p>
</section>
<section id="plate-slice">
<h3>Plate Slice<a class="headerlink" href="#plate-slice" title="Permalink to this heading">#</a></h3>
<p>We can use the same idea to model a slice of bread being on a plate.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">plate_slice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nd">@migration</span><span class="p">(</span><span class="n">SchRule</span><span class="p">,</span><span class="w"> </span><span class="n">SchKitchen</span><span class="p">,</span><span class="w"> </span><span class="k">begin</span>
<span class="w">  </span><span class="n">L</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nd">@join</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="n">slice</span><span class="o">::</span><span class="kt">BreadSlice</span>
<span class="w">    </span><span class="n">plate</span><span class="o">::</span><span class="kt">Plate</span>
<span class="w">  </span><span class="k">end</span>
<span class="w">  </span><span class="n">K</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nd">@join</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="n">slice</span><span class="o">::</span><span class="kt">BreadSlice</span>
<span class="w">    </span><span class="n">plate</span><span class="o">::</span><span class="kt">Plate</span>
<span class="w">  </span><span class="k">end</span>
<span class="w">  </span><span class="n">R</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nd">@join</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="n">slice</span><span class="o">::</span><span class="kt">BreadSlice</span>
<span class="w">    </span><span class="n">plate</span><span class="o">::</span><span class="kt">Plate</span>
<span class="w">    </span><span class="n">food_in_on</span><span class="p">(</span><span class="n">bread_slice_is_food</span><span class="p">(</span><span class="n">slice</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ware_is_entity</span><span class="p">(</span><span class="n">plate_is_ware</span><span class="p">(</span><span class="n">plate</span><span class="p">))</span>
<span class="w">  </span><span class="k">end</span>
<span class="k">end</span><span class="p">)</span>
<span class="n">plate_slice_rule</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">make_rule</span><span class="p">(</span><span class="n">plate_slice</span><span class="p">,</span><span class="w"> </span><span class="n">yKitchen</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>In this case, the bread slice and plate are mapped to the same entity. In the case of the bread slice, the function that does this mapping is tied to the <code class="docutils literal notranslate"><span class="pre">food_in_on</span></code> morphism and, in the case of plate, the function that maps it to entity is tied to the <code class="docutils literal notranslate"><span class="pre">ware_is_entity</span></code> morphism. This is effectively saying that the entity that the food is on is the same entity as the plate.</p>
<div class="admonition-exercise admonition">
<p class="admonition-title">Exercise</p>
<p>Visualize in your head what the parts of the double-pushout (DPO) square would look like based on this rule.</p>
</div>
</section>
</section>
<section id="summary">
<h2>7.4 Summary<a class="headerlink" href="#summary" title="Permalink to this heading">#</a></h2>
<p>Both examples illustrate the versatility of schemas and double-pushout rewriting in modeling transformations across different contexts. From the reconfiguration of physical structures like cubes to the dynamic arrangement of items in a kitchen, DPO rewriting provides a powerful tool for modeling and simulating changes in languages other than graphs. In particular, these concepts have shown promise in managing world states when doing task planning in robotics <a class="footnote-reference brackets" href="#id7" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>. For the ambitious reader, we encourage you to not end your study here, but refer to advanced expositions of these topics <a class="footnote-reference brackets" href="#id8" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> <a class="footnote-reference brackets" href="#id9" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a> <a class="footnote-reference brackets" href="#id10" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a>.</p>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this heading">#</a></h2>
<hr class="footnotes docutils" />
<aside class="footnote brackets" id="id6" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>MacLane, S. 1971. Categories for the Working Mathematician. New York: Springer-Verlag. Graduate Texts in Mathematics, Vol. 5.</p>
</aside>
<aside class="footnote brackets" id="id7" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>Aguinaldo, A., Patterson, E., Fairbanks, J., Regli, W., &amp; Ruiz, J. A Categorical Representation Language and Computational System for Knowledge-Based Planning. 2023 AAAI Fall Symposium on Unifying Representations for Robot Application Development. 2023.</p>
</aside>
<aside class="footnote brackets" id="id8" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">3</a><span class="fn-bracket">]</span></span>
<p>Computational category-theoretic rewriting, 2023. Kristopher Brown, Evan Patterson, Tyler Hanks, James Fairbanks. Journal of Logical and Algebraic Methods in Programming.</p>
</aside>
<aside class="footnote brackets" id="id9" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">4</a><span class="fn-bracket">]</span></span>
<p>Computational category-theoretic rewriting, 2023. Kristopher Brown, Evan Patterson, Tyler Hanks, James Fairbanks. Journal of Logical and Algebraic Methods in Programming.</p>
</aside>
<aside class="footnote brackets" id="id10" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">5</a><span class="fn-bracket">]</span></span>
<p>Categorical data structures for technical computing, 2022. Evan Patterson, Owen Lynch, James Fairbanks. Compositionality.</p>
</aside>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "ToposInstitute/AlgJulia-Book",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "julia-1.10"
        },
        kernelOptions: {
            name: "julia-1.10",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'julia-1.10'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="chp6-dpo.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Chapter 6: Evolving Graphs</p>
      </div>
    </a>
    <a class="right-next"
       href="acknowledgements.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Credits</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">7.1 Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cube-configuration">7.2 Cube Configuration</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-closed-box">A closed box</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#opening-a-closed-box">Opening a closed box</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#working-in-a-kitchen">7.3 Working in a Kitchen</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#put-cheese-on-bread">Put Cheese On Bread</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#plate-slice">Plate Slice</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">7.4 Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book Community
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>